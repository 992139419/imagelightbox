<<<<<<< HEAD
!function(t,i,e,n){"use strict";var o=t("<div/>").attr("id","imagelightbox-loading").append(t("<div/>")),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),l=a.add(r),c=t("<div/>",{id:"imagelightbox-caption",html:"&nbsp;"}),s=t("<a/>",{id:"imagelightbox-close"}),u=t("<div/>",{id:"imagelightbox-overlay"}),h=t("<a/>",{href:"#",class:"imagelightbox-navitem"}),f=t("<div/>",{id:"imagelightbox-nav"}),g=t("<div/>",{id:"imagelightbox-wrapper"}),d={home:{href:i.location.pathname,title:e.title},pushSpace:{name:"#!imagelightbox/",title:"ImageLightBox"},spacer:" | "},p=function(){var t=e.body||e.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},b=!(!i.history||!history.pushState),m=p()!==!1,v=function(t,i,e){var n={},o=p();n[o+"transform"]="translateX("+i+")",n[o+"transition"]=o+"transform "+e+"s linear",t.css(n)},x="ontouchstart"in i,y=i.navigator.pointerEnabled||i.navigator.msPointerEnabled,w=function(t){if(x)return!0;if(!y||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(n){var a=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,history:!1,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},n),r=function(){a.arrows&&P(this),a.navigation&&M(),a.overlay&&I(),a.button&&T(),a.caption&&g.append(c)},p=function(){a.activity&&q(),a.caption&&C()},k=function(){a.activity&&S(),a.arrows&&l.css("display","block")},E=function(){if(B=L.index(X)-1,B<0){if(a.quitOnEnd===!0)return $(),!1;B=L.length-1}X=L.eq(B),g.trigger("previous.ilb2",{index:B}),Y(-1)},O=function(){if(B=L.index(X)+1,B>=L.length){if(a.quitOnEnd===!0)return $(),!1;B=0}X=L.eq(B),g.trigger("next.ilb2",{index:B}),Y(1)},q=function(){g.append(o)},S=function(){t("#imagelightbox-loading").remove()},I=function(){g.append(u)},T=function(){s.appendTo(g).on("click.ilb7",function(){return $(),!1})},C=function(){c.html("&nbsp;"),t(X).data("ilb2-caption")?c.html(t(X).data("ilb2-caption")):t(X).find("img").length>0&&c.html(t(X).find("img").attr("alt"))},M=function(){if(L.length){for(var i=0;i<L.length;i++)f.append(h.clone());var e=f.children("a");e.eq(L.index(X)).addClass("active"),g.on("previous.ilb2 next.ilb2",function(){e.removeClass("active").eq(L.index(X)).addClass("active")}),g.append(f),f.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(i){var e=t(this);if(L.eq(e.index()).attr("href")!==t("#imagelightbox").attr("src")){var n=L.eq(e.index());n.length&&(_=L.index(X),X=n,Y(e.index()<_?-1:1))}e.addClass("active").siblings().removeClass("active")})}},P=function(){g.append(l),l.on("click.ilb7 touchend.ilb7",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?E():O(),!1})},D="",L=t([]),B=0,X=t(),j=t(),N=0,U=0,H=0,K=!1,_=0,z=function(t){function i(t){var i,n,o,a=e.createElement("a"),r={};for(a.href=t,i=a.search.replace(/^\?/,"").split("&"),o=0;o<i.length;o++)n=i[o].split("="),r[n[0]]=n[1];return{protocol:a.protocol,host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,searchObject:r,hash:a.hash}}var n=a.allowedTypes,o=/^(?!\|)[\w\|]+(?!\|)$/.test(n);if(!o)return!1;var r=t.attr("href"),l=i(r).pathname,c=new RegExp(n,"i"),s=c.test(l);return s},R=function(){if(!j.length)return!0;var e=c.outerHeight(),n=.8*t(i).width(),o=(i.innerHeight?i.innerHeight:t(i).height())-e,a=.9*o,r=new Image;r.src=j.attr("src"),r.onload=function(){if(N=r.width,U=r.height,N>n||U>a){var e=N/U>n/a?N/n:U/a;N/=e,U/=e}j.css({width:N+"px",height:U+"px",top:(o-U)/2+"px",left:(t(i).width()-N)/2+"px"})}},Y=function(e){if(K)return!1;if(j.length){var n={opacity:0};m?v(j,100*e-H+"px",a.animationSpeed/1e3):n.left=parseInt(j.css("left"))+100*e+"px",j.animate(n,a.animationSpeed,function(){Q()}),H=0}K=!0,p(),setTimeout(function(){var n=X.attr("href");if(b&&a.history){var o=L.index(X)+1;if(0!==o){var r={index:o,set:D},l=d.pushSpace.name+r.set+"/"+r.index;i.history.pushState(r,"",l)}else $()}j=t('<img id="'+a.id+'" />').attr("src",n).on("load.ilb7",function(){g.trigger("loaded.ilb2");var i={opacity:1};if(j.appendTo(g),R(),j.css("opacity",0),m)v(j,-100*e+"px",0),setTimeout(function(){v(j,"0px",a.animationSpeed/1e3)},50);else{var n=parseInt(j.css("left"));i.left=n+"px",j.css("left",n-100*e+"px")}if(j.animate(i,a.animationSpeed,function(){K=!1,k()}),a.preloadNext){var o=L.eq(L.index(X)+1);o.length||(o=L.eq(0)),t("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){k()});var c=0,s=0,u=0;j.on(y?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),a.quitOnImgClick)return $(),!1;if(w(t.originalEvent))return!0;var i=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;N/2>i?E():O()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){return!(w(t.originalEvent)&&!a.quitOnImgClick)||(m&&(u=parseInt(j.css("left"))),void(c=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){return!(w(t.originalEvent)&&!a.quitOnImgClick)||(t.preventDefault(),s=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,H=c-s,void(m?v(j,-H+"px",0):j.css("left",u-H+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){return!(w(t.originalEvent)&&!a.quitOnImgClick)||void(Math.abs(H)>50?H<0?E():O():m?v(j,"0px",a.animationSpeed/1e3):j.animate({left:u+"px"},a.animationSpeed/2))})},a.animationSpeed+100)},Q=function(){return!!j.length&&(j.remove(),void(j=t()))},W=function(i){return!K&&(K=!1,X=i,r(),t("body").append(g),a.lockBody&&t("body").addClass("imagelightbox-scroll-lock"),g.trigger("start.ilb2"),void Y(0))},$=function(){return g.trigger("quit.ilb2"),a.lockBody&&t("body").removeClass("imagelightbox-scroll-lock"),!!j.length&&(j.animate({opacity:0},a.animationSpeed,function(){Q(),K=!1,L=t([]),g.remove().find("*").remove()}),void(b&&a.history&&i.history.pushState({},"",d.home.href)))},A=function(i){function e(){i.filter(function(){return t(this).data("imagelightbox")===D}).filter(function(){return z(t(this))}).each(function(){L=L.add(t(this))})}i.on("startILB click.ilb7",{set:D},function(i){i.preventDefault(),D=t(i.currentTarget).data("imagelightbox"),g.data("imagelightbox-wrapper",D),e(),L.length<1?$():W(t(this))})};return t(i).on("resize.ilb7",R).on("popstate",function(t){return""===i.location.hash&&$(),E(),!1}).on("load.ilb7",function(e){if(b&&a.history&&!t.isEmptyObject(i.history.state)){var n=i.history.state.set,o=i.history.state.index-1;t("[data-imagelightbox='"+n+"']").eq(o).trigger("startILB")}}),t(e).on(x?"touchend.ilb7":"click.ilb7",function(i){console.log("TOUCHME"),a.quitOnDocClick&&j.length&&!t(i.target).is(j)&&(i.preventDefault(),$())}).on("keydown.ilb7",function(t){if(a.lockBody){if(!j.length)return!0;if([9,32,38,40].indexOf(t.which)>-1)return t.preventDefault(),!1}}).on("keyup.ilb7",function(t){if(a.enableKeyboard){if(!j.length)return!0;t.preventDefault(),[27].indexOf(t.which)>-1&&a.quitOnEscKey&&$(),[37].indexOf(t.which)>-1?E():[39].indexOf(t.which)>-1&&O()}}),t(e).off("click",this.selector),A(t(this)),this.addToImageLightbox=function(t){A(t)},this.loadPreviousImage=function(){E()},this.loadNextImage=function(){O()},this.quitImageLightbox=function(){return $(),this},this.startImageLightbox=function(){t(this).trigger("click.ilb7")},this}}(jQuery,window,document);
=======
!function(t,i,n){"use strict";var e=t("<div/>").attr("class","imagelightbox-loading").append(t("<div/>")),o=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),r=o.add(a),l=t("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),c=t("<a/>",{class:"imagelightbox-close"}),u=t("<div/>",{class:"imagelightbox-overlay"}),s=t("<a/>",{href:"#",class:"imagelightbox-navitem"}),f=t("<div/>",{class:"imagelightbox-nav"}),g=t("<div/>",{class:"imagelightbox-wrapper"}),d=function(){var t=n.body||n.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},h=d()!==!1,p=function(t,i,n){var e={},o=d();e[o+"transform"]="translateX("+i+")",e[o+"transition"]=o+"transform "+n+"s linear",t.css(e)},b="ontouchstart"in i,v=i.navigator.pointerEnabled||i.navigator.msPointerEnabled,m=function(t){if(b)return!0;if(!v||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(o){var a=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},o),d=function(){a.arrows&&I(this),a.navigation&&C(),a.overlay&&O(),a.button&&S(),a.caption&&g.append(l)},x=function(){a.activity&&E(),a.caption&&T()},y=function(){a.activity&&q(),a.arrows&&r.css("display","block")},w=function(){var t=P.index(D)-1;if(t<0){if(a.quitOnEnd===!0)return Y(),!1;t=P.length-1}D=P.eq(t),g.trigger("previous.ilb2"),z(-1)},k=function(){var t=P.index(D)+1;if(t>=P.length){if(a.quitOnEnd===!0)return Y(),!1;t=0}D=P.eq(t),g.trigger("next.ilb2"),z(1)},E=function(){g.append(e)},q=function(){t(".imagelightbox-loading").remove()},O=function(){g.append(u)},S=function(){c.appendTo(g).on("click.ilb7",function(){return Y(),!1})},T=function(){l.html("&nbsp;"),t(D).data("ilb2-caption")?l.html(t(D).data("ilb2-caption")):t(D).find("img").length>0&&l.html(t(D).find("img").attr("alt"))},C=function(){if(P.length){for(var i=0;i<P.length;i++)f.append(s.clone());var n=f.children("a");n.eq(P.index(D)).addClass("active"),g.on("previous.ilb2 next.ilb2",function(){n.removeClass("active").eq(P.index(D)).addClass("active")}),g.append(f),f.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var i=t(this);if(P.eq(i.index()).attr("href")!==t(".imagelightbox").attr("src")){var n=P.eq(i.index());n.length&&(K=P.index(D),D=n,z(i.index()<K?-1:1))}i.addClass("active").siblings().removeClass("active")})}},I=function(){g.append(r),r.on("click.ilb7 touchend.ilb7",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?w():k(),!1})},M="",P=t([]),D=t(),X=t(),L=0,N=0,j=0,B=!1,K=0,U=function(t){function i(t){var i,e,o,a=n.createElement("a"),r={};for(a.href=t,i=a.search.replace(/^\?/,"").split("&"),o=0;o<i.length;o++)e=i[o].split("="),r[e[0]]=e[1];return{protocol:a.protocol,host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,searchObject:r,hash:a.hash}}var e=a.allowedTypes,o=/^(?!\|)[\w\|]+(?!\|)$/.test(e);if(!o)return!1;var r=t.attr("href"),l=i(r).pathname,c=new RegExp(e,"i"),u=c.test(l);return u},_=function(){if(!X.length)return!0;var n=l.outerHeight(),e=.8*t(i).width(),o=(i.innerHeight?i.innerHeight:t(i).height())-n,a=.9*o,r=new Image;r.src=X.attr("src"),r.onload=function(){if(L=r.width,N=r.height,L>e||N>a){var n=L/N>e/a?L/e:N/a;L/=n,N/=n}X.css({width:L+"px",height:N+"px",top:(o-N)/2+"px",left:(t(i).width()-L)/2+"px"})}},z=function(i){if(B)return!1;if(X.length){var n={opacity:0};h?p(X,100*i-j+"px",a.animationSpeed/1e3):n.left=parseInt(X.css("left"))+100*i+"px",X.animate(n,a.animationSpeed,function(){H()}),j=0}B=!0,x(),setTimeout(function(){var n=D.attr("href");X=t('<img id="'+a.id+'" />').attr("src",n).on("load.ilb7",function(){g.trigger("loaded.ilb2");var n={opacity:1};if(X.appendTo(g),_(),X.css("opacity",0),h)p(X,-100*i+"px",0),setTimeout(function(){p(X,"0px",a.animationSpeed/1e3)},50);else{var e=parseInt(X.css("left"));n.left=e+"px",X.css("left",e-100*i+"px")}if(X.animate(n,a.animationSpeed,function(){B=!1,y()}),a.preloadNext){var o=P.eq(P.index(D)+1);o.length||(o=P.eq(0)),t("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){y()});var e=0,o=0,r=0;X.on(v?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),a.quitOnImgClick)return Y(),!1;if(m(t.originalEvent))return!0;var i=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;L/2>i?w():k()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){return!(m(t.originalEvent)&&!a.quitOnImgClick)||(h&&(r=parseInt(X.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){return!(m(t.originalEvent)&&!a.quitOnImgClick)||(t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,j=e-o,void(h?p(X,-j+"px",0):X.css("left",r-j+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){return!(m(t.originalEvent)&&!a.quitOnImgClick)||void(Math.abs(j)>50?j<0?w():k():h?p(X,"0px",a.animationSpeed/1e3):X.animate({left:r+"px"},a.animationSpeed/2))})},a.animationSpeed+100)},H=function(){return!!X.length&&(X.remove(),void(X=t()))},R=function(i){return!B&&(B=!1,D=i,d(),t("body").append(g),a.lockBody&&t("body").addClass("imagelightbox-scroll-lock"),g.trigger("start.ilb2"),void z(0))},Y=function(){return g.trigger("quit.ilb2"),a.lockBody&&t("body").removeClass("imagelightbox-scroll-lock"),!!X.length&&void X.animate({opacity:0},a.animationSpeed,function(){H(),B=!1,P=t([]),g.remove().find("*").remove()})},Q=function(i){function n(){i.filter(function(){return t(this).data("imagelightbox")===M}).filter(function(){return U(t(this))}).each(function(){P=P.add(t(this))})}i.on("click.ilb7",{set:M},function(i){i.preventDefault(),M=t(i.currentTarget).data("imagelightbox"),n(),P.length<1?Y():R(t(this))})};return t(i).on("resize.ilb7",_),t(n).ready(function(){a.quitOnDocClick&&t(n).on(b?"touchend.ilb7":"click.ilb7",function(i){X.length&&!t(i.target).is(X)&&(i.preventDefault(),Y())}),a.lockBody&&t(n).on("keydown.ilb7",function(t){return!X.length||([9,32,38,40].indexOf(t.which)>-1?(t.preventDefault(),!1):void 0)}),a.enableKeyboard&&t(n).on("keyup.ilb7",function(t){return!X.length||(t.preventDefault(),[27].indexOf(t.which)>-1&&a.quitOnEscKey&&Y(),void([37].indexOf(t.which)>-1?w():[39].indexOf(t.which)>-1&&k()))})}),t(n).off("click",this.selector),Q(t(this)),this.addToImageLightbox=function(t){Q(t)},this.loadPreviousImage=function(){w()},this.loadNextImage=function(){k()},this.quitImageLightbox=function(){return Y(),this},this.startImageLightbox=function(){t(this).trigger("click.ilb7")},this}}(jQuery,window,document);
>>>>>>> upstream/develop
