!function(t,n,i,e){"use strict";var o=function(){var t=i.body||i.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition?"":!1},a=o()!==!1,r=function(t,n,i){var e={},a=o();e[a+"transform"]="translateX("+n+")",e[a+"transition"]=a+"transform "+i+"s linear",t.css(e)},c="ontouchstart"in n,u=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,d=function(t){if(c)return!0;if(!u||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(o){var l=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,activity:!1,arrows:!1,button:!1,navigation:!1,overlay:!1,caption:!1,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:function(){l.arrows&&T(this),l.navigation&&b(this,l.selector),l.overlay&&s(),l.button&&p()},onEnd:function(){l.activity&&g(),l.arrows&&w(),l.navigation&&E(),l.overlay&&h(),l.caption&&x(),l.button&&v()},onLoadStart:function(){l.activity&&f(),l.caption&&x()},onLoadEnd:function(){l.activity&&g(),l.arrows&&t(".imagelightbox-arrow").css("display","block"),l.navigation&&y(l.selector),l.caption&&m()},previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){var t=S.index(k)-1;if(0>t){if(l.quitOnEnd===!0)return U(),!1;t=S.length-1}k=S.eq(t)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){var t=S.index(k)+1;if(t>=S.length){if(l.quitOnEnd===!0)return U(),!1;t=0}k=S.eq(t)}},o),f=function(){t('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},g=function(){t("#imagelightbox-loading").remove()},s=function(){t('<div id="imagelightbox-overlay"></div>').appendTo("body")},h=function(){t("#imagelightbox-overlay").remove()},p=function(){t('<a href="#" id="imagelightbox-close"></a>').appendTo("body").on("click",function(){return t(this).remove(),U(),!1})},v=function(){t("#imagelightbox-close").remove()},m=function(){var n=t(k).find("img").attr("alt");n&&n.length>0&&t('<div id="imagelightbox-caption">'+n+"</div>").appendTo("body")},x=function(){t("#imagelightbox-caption").remove()},b=function(n,i){var e=t(i);if(e.length){for(var o=t('<div id="imagelightbox-nav"></div>'),a=0;a<e.length;a++)o.append('<a href="#"></a>');o.appendTo("body"),o.on("click touchend",function(){return!1});var r=o.find("a");r.on("click touchend",function(){var i=t(this);return e.eq(i.index()).attr("href")!==t("#imagelightbox").attr("src")&&n.switchImageLightbox(i.index()),r.removeClass("active"),r.eq(i.index()).addClass("active"),!1}).on("touchend",function(){return!1})}},y=function(n){var i=t("#imagelightbox-nav").find("a");i.removeClass("active"),i.addClass("active"),i.eq(t(n).filter('[href="'+t("#imagelightbox").attr("src")+'"]').index(n)).addClass("active")},E=function(){t("#imagelightbox-nav").remove()},T=function(n){var i=t('<button type="button" class="imagelightbox-arrow imagelightbox-arrow-left"></button><button type="button" class="imagelightbox-arrow imagelightbox-arrow-right"></button>');i.appendTo("body"),i.on("click touchend",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?X(n):N(n),!1})},w=function(){t(".imagelightbox-arrow").remove()},S=t([]),k=t(),q=t(),I=0,C=0,L=0,O=!1,D=function(n){var i="a"===t(n).prop("tagName").toLowerCase()&&new RegExp(".("+l.allowedTypes+")$","i").test(t(n).attr("href")),o=t(n).attr("data-lightbox")!==e;return i||o},M=function(){if(!q.length)return!0;var i=.8*t(n).width(),e=.9*t(n).height(),o=new Image;o.src=q.attr("src"),o.onload=function(){if(I=o.width,C=o.height,I>i||C>e){var a=I/C>i/e?I/i:C/e;I/=a,C/=a}q.css({width:I+"px",height:C+"px",top:(t(n).height()-C)/2+"px",left:(t(n).width()-I)/2+"px"})}},P=function(n){if(O)return!1;if(n="undefined"==typeof n?!1:"left"===n?1:-1,q.length){var i={opacity:0};a?r(q,100*n-L+"px",l.animationSpeed/1e3):i.left=parseInt(q.css("left"))+100*n+"px",q.animate(i,l.animationSpeed,function(){K()}),L=0}O=!0,l.onLoadStart!==!1&&l.onLoadStart(),setTimeout(function(){var i=k.attr("href");q=t('<img id="'+l.id+'" />').attr("src",i).load(function(){var i={opacity:1};if(q.appendTo("body"),M(),q.css("opacity",0),a)r(q,-100*n+"px",0),setTimeout(function(){r(q,"0px",l.animationSpeed/1e3)},50);else{var e=parseInt(q.css("left"));i.left=e+"px",q.css("left",e-100*n+"px")}if(q.animate(i,l.animationSpeed,function(){O=!1,l.onLoadEnd!==!1&&l.onLoadEnd()}),l.preloadNext){var o=S.eq(S.index(k)+1);o.length||(o=S.eq(0)),t("<img />").attr("src",o.attr("href")).load()}}).error(function(){l.onLoadEnd!==!1&&l.onLoadEnd()});var e=0,o=0,c=0;q.on(u?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),l.quitOnImgClick)return U(),!1;if(d(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;I/2>n?X():N()}).on("touchstart pointerdown MSPointerDown",function(t){return!d(t.originalEvent)||l.quitOnImgClick?!0:(a&&(c=parseInt(q.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!d(t.originalEvent)||l.quitOnImgClick?!0:(t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,L=e-o,void(a?r(q,-L+"px",0):q.css("left",c-L+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!d(t.originalEvent)||l.quitOnImgClick?!0:void(Math.abs(L)>50?0>L?X():N():a?r(q,"0px",l.animationSpeed/1e3):q.animate({left:c+"px"},l.animationSpeed/2))})},l.animationSpeed+100)},X=function(){l.previousTarget()!==!1&&P("left")},N=function(){l.nextTarget()!==!1&&P("right")},K=function(){return q.length?(q.remove(),void(q=t())):!1},U=function(){return q.length?void q.animate({opacity:0},l.animationSpeed,function(){K(),O=!1,l.onEnd!==!1&&l.onEnd()}):!1};return t(n).on("resize",M),l.quitOnDocClick&&t(i).on(c?"touchend":"click",function(n){q.length&&!t(n.target).is(q)&&(n.preventDefault(),U())}),l.enableKeyboard&&t(i).on("keyup",function(t){return q.length?(t.preventDefault(),27===t.keyCode&&l.quitOnEscKey===!0&&U(),void(37===t.keyCode?X():39===t.keyCode&&N())):!0}),this.startImageLightbox=function(n){return D(this)?(n!==e&&n.preventDefault(),O?!1:(O=!1,l.onStart!==!1&&l.onStart(),k=t(this),void P())):!0},t(i).off("click",this.selector),t(i).on("click",this.selector,this.startImageLightbox),this.each(function(){return D(this)?void(S=S.add(t(this))):!0}),this.switchImageLightbox=function(t){var n=S.eq(t);if(n.length){var i=S.index(k);k=n,P(i>t?"left":"right")}return this},this.loadPreviousImage=function(){X()},this.loadNextImage=function(){N()},this.quitImageLightbox=function(){return U(),this},this.addImageLightbox=function(n){return n.each(function(){return D(this)?void(S=S.add(t(this))):!0}),n.click(this.startImageLightbox),this},this}}(jQuery,window,document);