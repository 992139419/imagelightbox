!function(t,n,e){"use strict";var i=function(){var t=e.body||e.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition?"":!1},o=i()!==!1,r=function(t,n,e){var o={},r=i();o[r+"transform"]="translateX("+n+")",o[r+"transition"]=r+"transform "+e+"s linear",t.css(o)},a="ontouchstart"in n,u=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,d=function(t){if(a)return!0;if(!u||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(i){var c=t.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},i),f=t([]),l=t(),p=t(),s=0,g=0,h=0,v=!1,m=function(n){return"a"===t(n).prop("tagName").toLowerCase()&&new RegExp(".("+c.allowedTypes+")$","i").test(t(n).attr("href"))},x=function(){if(!p.length)return!1;var e=.8*t(n).width(),i=.9*t(n).height(),o=new Image;o.src=p.attr("src"),o.onload=function(){if(s=o.width,g=o.height,s>e||g>i){var r=s/g>e/i?s/e:g/i;s/=r,g/=r}p.css({width:s+"px",height:g+"px",top:(t(n).height()-g)/2+"px",left:(t(n).width()-s)/2+"px"})}},E=function(n){if(v)return!1;if(n="undefined"==typeof n?!1:"left"===n?1:-1,p.length){if(n!==!1&&(f.length<2||c.quitOnEnd===!0&&(-1===n&&0===f.index(l)||1===n&&f.index(l)===f.length-1)))return S(),!1;var e={opacity:0};o?r(p,100*n-h+"px",c.animationSpeed/1e3):e.left=parseInt(p.css("left"))+100*n+"px",p.animate(e,c.animationSpeed,function(){y()}),h=0}v=!0,c.onLoadStart!==!1&&c.onLoadStart(),setTimeout(function(){p=t("<img "+c.selector+" />").attr("src",l.attr("href")).load(function(){p.appendTo("body"),x();var e={opacity:1};if(p.css("opacity",0),o)r(p,-100*n+"px",0),setTimeout(function(){r(p,"0px",c.animationSpeed/1e3)},50);else{var i=parseInt(p.css("left"));e.left=i+"px",p.css("left",i-100*n+"px")}if(p.animate(e,c.animationSpeed,function(){v=!1,c.onLoadEnd!==!1&&c.onLoadEnd()}),c.preloadNext){var a=f.eq(f.index(l)+1);a.length||(a=f.eq(0)),t("<img />").attr("src",a.attr("href")).load()}}).error(function(){c.onLoadEnd!==!1&&c.onLoadEnd()});var e=0,i=0,a=0;p.on(u?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),c.quitOnImgClick)return S(),!1;if(d(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;l=f.eq(f.index(l)-(s/2>n?1:-1)),l.length||(l=f.eq(s/2>n?f.length:0)),E(s/2>n?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(t){return!d(t.originalEvent)||c.quitOnImgClick?!0:(o&&(a=parseInt(p.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!d(t.originalEvent)||c.quitOnImgClick?!0:(t.preventDefault(),i=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,h=e-i,void(o?r(p,-h+"px",0):p.css("left",a-h+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!d(t.originalEvent)||c.quitOnImgClick?!0:void(Math.abs(h)>50?(l=f.eq(f.index(l)-(0>h?1:-1)),l.length||(l=f.eq(0>h?f.length:0)),E(h>0?"right":"left")):o?r(p,"0px",c.animationSpeed/1e3):p.animate({left:a+"px"},c.animationSpeed/2))})},c.animationSpeed+100)},y=function(){return p.length?(p.remove(),void(p=t())):!1},S=function(){return p.length?void p.animate({opacity:0},c.animationSpeed,function(){y(),v=!1,c.onEnd!==!1&&c.onEnd()}):!1};return t(n).on("resize",x),c.quitOnDocClick&&t(e).on(a?"touchend":"click",function(n){p.length&&!t(n.target).is(p)&&S()}),c.enableKeyboard&&t(e).on("keyup",function(t){return p.length?(t.preventDefault(),27===t.keyCode&&S(),void((37===t.keyCode||39===t.keyCode)&&(l=f.eq(f.index(l)-(37===t.keyCode?1:-1)),l.length||(l=f.eq(37===t.keyCode?f.length:0)),E(37===t.keyCode?"left":"right")))):!0}),t(e).on("click",this.selector,function(n){return m(this)?(n.preventDefault(),v?!1:(v=!1,c.onStart!==!1&&c.onStart(),l=t(this),void E())):!0}),this.each(function(){return m(this)?void(f=f.add(t(this))):!0}),this.switchImageLightbox=function(t){var n=f.eq(t);if(n.length){var e=f.index(l);l=n,E(e>t?"left":"right")}return this},this.quitImageLightbox=function(){return S(),this},this}}(jQuery,window,document);