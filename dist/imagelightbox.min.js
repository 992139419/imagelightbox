!function(t,n,i,e){"use strict";var o=function(){var t=i.body||i.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},a=o()!==!1,r=function(t,n,i){var e={},a=o();e[a+"transform"]="translateX("+n+")",e[a+"transition"]=a+"transform "+i+"s linear",t.css(e)},u=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,c=function(t){if("ontouchstart"in n)return!0;if(!u||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(e){var o=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:function(){o.arrows&&y(this),o.navigation&&m(this,o.selector),o.overlay&&l(),o.button&&s()},onEnd:function(){o.activity&&f(),o.arrows&&E(),o.navigation&&b(),o.overlay&&g(),o.caption&&v(),o.button&&p()},onLoadStart:function(){o.activity&&d(),o.caption&&v()},onLoadEnd:function(){o.activity&&f(),o.arrows&&t(".imagelightbox-arrow").css("display","block"),o.navigation&&x(o.selector),o.caption&&h()},previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){var t=T.index(S)-1;if(t<0){if(o.quitOnEnd===!0)return N(),!1;t=T.length-1}S=T.eq(t)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){var t=T.index(S)+1;if(t>=T.length){if(o.quitOnEnd===!0)return N(),!1;t=0}S=T.eq(t)}},e),d=function(){t('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},f=function(){t("#imagelightbox-loading").remove()},l=function(){t('<div id="imagelightbox-overlay"></div>').appendTo("body")},g=function(){t("#imagelightbox-overlay").remove()},s=function(){t('<a href="#" id="imagelightbox-close"></a>').appendTo("body").on("click",function(){return t(this).remove(),N(),!1})},p=function(){t("#imagelightbox-close").remove()},h=function(){var n=t(S).find("img").attr("alt");n&&n.length>0&&t('<div id="imagelightbox-caption">'+n+"</div>").appendTo("body")},v=function(){t("#imagelightbox-caption").remove()},m=function(n,i){var e=t(i);if(e.length){for(var o=t('<div id="imagelightbox-nav"></div>'),a=0;a<e.length;a++)o.append('<a href="#"></a>');o.appendTo("body"),o.on("click touchend",function(){return!1});var r=o.find("a");r.on("click touchend",function(){var n=t(this);if(e.eq(n.index()).attr("href")!==t("#imagelightbox").attr("src")){var i=T.eq(n.index());if(i.length){var o=T.index(S);S=i,D(n.index()<o?"left":"right")}}return r.removeClass("active"),r.eq(n.index()).addClass("active"),!1}).on("touchend",function(){return!1})}},x=function(n){var i=t("#imagelightbox-nav").find("a");i.removeClass("active"),i.eq(t(n).filter('[href="'+t("#imagelightbox").attr("src")+'"]').index(n)).addClass("active")},b=function(){t("#imagelightbox-nav").remove()},y=function(n){var i=t('<button type="button" class="imagelightbox-arrow imagelightbox-arrow-left"></button><button type="button" class="imagelightbox-arrow imagelightbox-arrow-right"></button>');i.appendTo("body"),i.on("click touchend",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?L(n):M(n),!1})},E=function(){t(".imagelightbox-arrow").remove()},T=t([]),S=t(),k=t(),w=0,q=0,O=0,C=!1,I=function(){if(!k.length)return!0;var i=.8*t(n).width(),e=n.innerHeight?n.innerHeight:t(n).height(),o=.9*e,a=new Image;a.src=k.attr("src"),a.onload=function(){if(w=a.width,q=a.height,w>i||q>o){var r=w/q>i/o?w/i:q/o;w/=r,q/=r}k.css({width:w+"px",height:q+"px",top:(e-q)/2+"px",left:(t(n).width()-w)/2+"px"})}},D=function(n){if(C)return!1;if(n="undefined"!=typeof n&&("left"===n?1:-1),k.length){var i={opacity:0};a?r(k,100*n-O+"px",o.animationSpeed/1e3):i.left=parseInt(k.css("left"))+100*n+"px",k.animate(i,o.animationSpeed,function(){P()}),O=0}C=!0,o.onLoadStart!==!1&&o.onLoadStart(),setTimeout(function(){var i=S.attr("href");k=t('<img id="'+o.id+'" />').attr("src",i).on("load",function(){var i={opacity:1};if(k.appendTo("body"),I(),k.css("opacity",0),a)r(k,-100*n+"px",0),setTimeout(function(){r(k,"0px",o.animationSpeed/1e3)},50);else{var e=parseInt(k.css("left"));i.left=e+"px",k.css("left",e-100*n+"px")}if(k.animate(i,o.animationSpeed,function(){C=!1,o.onLoadEnd!==!1&&o.onLoadEnd()}),o.preloadNext){var u=T.eq(T.index(S)+1);u.length||(u=T.eq(0)),t("<img />").attr("src",u.attr("href"))}}).on("error",function(){o.onLoadEnd!==!1&&o.onLoadEnd()});var e=0,d=0,f=0;k.on(u?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),o.quitOnImgClick)return N(),!1;if(c(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;w/2>n?L():M()}).on("touchstart pointerdown MSPointerDown",function(t){return!(c(t.originalEvent)&&!o.quitOnImgClick)||(a&&(f=parseInt(k.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!(c(t.originalEvent)&&!o.quitOnImgClick)||(t.preventDefault(),d=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,O=e-d,void(a?r(k,-O+"px",0):k.css("left",f-O+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!(c(t.originalEvent)&&!o.quitOnImgClick)||void(Math.abs(O)>50?O<0?L():M():a?r(k,"0px",o.animationSpeed/1e3):k.animate({left:f+"px"},o.animationSpeed/2))})},o.animationSpeed+100)},L=function(){o.previousTarget()!==!1&&D("left")},M=function(){o.nextTarget()!==!1&&D("right")},P=function(){return!!k.length&&(k.remove(),void(k=t()))},X=function(n){return!C&&(C=!1,o.quitOnDocClick&&t(i).on("touchend click",function(n){return n.stopPropagation(),n.preventDefault(),!(n.handled===!0||!k.length||t(n.target).is(k))&&(N(),void(n.handled=!0))}),o.enableKeyboard&&t(i).on("keyup",function(t){return!k.length||(t.preventDefault(),27===t.keyCode&&o.quitOnEscKey===!0&&N(),void(37===t.keyCode?L():39===t.keyCode&&M()))}),o.onStart!==!1&&o.onStart(),S=n,void D())},N=function(){return!!k.length&&void k.animate({opacity:0},o.animationSpeed,function(){P(),C=!1,o.onEnd!==!1&&o.onEnd()})},K=function(n){n.each(function(){T=T.add(t(this))}),n.on("click",function(n){n.preventDefault(),X(t(this))})};return this.startImageLightbox=function(){this.length>0&&X(t(this[0]))},t(n).on("resize",I),t(i).off("click",this.selector),K(t(this)),this.loadPreviousImage=function(){L()},this.loadNextImage=function(){M()},this.quitImageLightbox=function(){return N(),this},this.addToImageLightbox=function(t){K(t)},this}}(jQuery,window,document);