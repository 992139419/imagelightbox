!function(e,t,i){"use strict";var n=e("<div/>").attr("class","imagelightbox-loading").append(e("<div/>")),o=e("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),a=e("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),r=o.add(a),l=e("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),c=e("<a/>",{class:"imagelightbox-close"}),u=e("<div/>",{class:"imagelightbox-overlay"}),s=e("<a/>",{href:"#",class:"imagelightbox-navitem"}),d=e("<div/>",{class:"imagelightbox-nav"}),f=e("<div/>",{class:"imagelightbox-wrapper"}),g=function(){var e=i.body||i.documentElement;return e=e.style,""===e.WebkitTransition?"-webkit-":""===e.MozTransition?"-moz-":""===e.OTransition?"-o-":""===e.transition&&""},p=g()!==!1,h=function(e,t,i){var n={},o=g();n[o+"transform"]="translateX("+t+")",n[o+"transition"]=o+"transform "+i+"s linear",e.css(n)},b="ontouchstart"in t,m=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,v=function(e){if(b)return!0;if(!m||"undefined"==typeof e||"undefined"==typeof e.pointerType)return!1;if("undefined"!=typeof e.MSPOINTER_TYPE_MOUSE){if(e.MSPOINTER_TYPE_MOUSE!==e.pointerType)return!0}else if("mouse"!==e.pointerType)return!0;return!1},x=function(){if(i.fullscreenEnabled||i.webkitFullscreenEnabled||i.mozFullScreenEnabled||i.msFullscreenEnabled)return!1};e.fn.imageLightbox=function(o){function a(e){return e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),!1}function g(){return i.exitFullscreen?i.exitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen(),!1}function y(){a(i.getElementById(w.id).parentElement)||g()}var w=e.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,gutter:10,offsetY:0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},o),E=function(){w.arrows&&D(this),w.navigation&&P(),w.overlay&&T(),w.button&&F(),w.caption&&f.append(l)},k=function(){w.activity&&C(),w.caption&&M()},q=function(){w.activity&&I(),w.arrows&&r.css("display","block")},O=function(){var e=z.index(X)-1;if(e<0){if(w.quitOnEnd===!0)return $(),!1;e=z.length-1}X=z.eq(e),f.trigger("previous.ilb2"),H(-1)},S=function(){var e=z.index(X)+1;if(e>=z.length){if(w.quitOnEnd===!0)return $(),!1;e=0}X=z.eq(e),f.trigger("next.ilb2"),H(1)},C=function(){f.append(n)},I=function(){e(".imagelightbox-loading").remove()},T=function(){f.append(u)},F=function(){c.appendTo(f).on("click.ilb7",function(){return $(),!1})},M=function(){l.html("&nbsp;"),e(X).data("ilb2-caption")?l.html(e(X).data("ilb2-caption")):e(X).find("img").length>0&&l.html(e(X).find("img").attr("alt"))},P=function(){if(z.length){for(var t=0;t<z.length;t++)d.append(s.clone());var i=d.children("a");i.eq(z.index(X)).addClass("active"),f.on("previous.ilb2 next.ilb2",function(){i.removeClass("active").eq(z.index(X)).addClass("active")}),f.append(d),d.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var t=e(this);if(z.eq(t.index()).attr("href")!==e(".imagelightbox").attr("src")){var i=z.eq(t.index());i.length&&(U=z.index(X),X=i,H(t.index()<U?-1:1))}t.addClass("active").siblings().removeClass("active")})}},D=function(){f.append(r),r.on("click.ilb7 touchend.ilb7",function(t){return t.stopImmediatePropagation(),t.preventDefault(),e(this).hasClass("imagelightbox-arrow-left")?O():S(),!1})},R="",z=e([]),X=e(),L=e(),B=0,N=0,j=0,K=!1,U=0,Y=function(e){function t(e){var t,n,o,a=i.createElement("a"),r={};for(a.href=e,t=a.search.replace(/^\?/,"").split("&"),o=0;o<t.length;o++)n=t[o].split("="),r[n[0]]=n[1];return{protocol:a.protocol,host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,searchObject:r,hash:a.hash}}var n=w.allowedTypes,o=/^(?!\|)[\w\|]+(?!\|)$/.test(n);if(!o)return!1;var a=e.attr("href"),r=t(a).pathname,l=new RegExp(n,"i"),c=l.test(r);return c},_=function(){if(!L.length)return!0;var i=w.caption?l.outerHeight():0,n=e(t).width(),o=e(t).height()-i,a=Math.abs(1-w.gutter/100),r=new Image;r.src=L.attr("src"),r.onload=function(){if(B=r.width,N=r.height,B>n||N>o){var i=B/N>n/o?B/n:N/o;B/=i,N/=i}var l=N*a,c=B*a,u=(1+w.offsetY/100)*(N-l)/2,s=(e(t).width()-c)/2;L.css({width:c+"px",height:l+"px",top:u+"px",left:s+"px"})}},H=function(t){if(K)return!1;if(L.length){var i={opacity:0};p?h(L,100*t-j+"px",w.animationSpeed/1e3):i.left=parseInt(L.css("left"))+100*t+"px",L.animate(i,w.animationSpeed,function(){Q()}),j=0}K=!0,k(),setTimeout(function(){var i=X.attr("href");L=e('<img id="'+w.id+'" />').attr("src",i).on("load.ilb7",function(){f.trigger("loaded.ilb2");var i={opacity:1};if(L.appendTo(f),_(),L.css("opacity",0),p)h(L,-100*t+"px",0),setTimeout(function(){h(L,"0px",w.animationSpeed/1e3)},50);else{var n=parseInt(L.css("left"));i.left=n+"px",L.css("left",n-100*t+"px")}if(L.animate(i,w.animationSpeed,function(){K=!1,q()}),w.preloadNext){var o=z.eq(z.index(X)+1);o.length||(o=z.eq(0)),e("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){q()});var n=0,o=0,a=0;L.on(m?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(e){if(e.preventDefault(),w.quitOnImgClick)return $(),!1;if(v(e.originalEvent))return!0;var t=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;B/2>t?O():S()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(e){return!(v(e.originalEvent)&&!w.quitOnImgClick)||(p&&(a=parseInt(L.css("left"))),void(n=e.originalEvent.pageX||e.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(e){return!((m||"pointermove"!==e.type)&&v(e.originalEvent)&&!w.quitOnImgClick)||(e.preventDefault(),o=e.originalEvent.pageX||e.originalEvent.touches[0].pageX,j=n-o,void(p?h(L,-j+"px",0):L.css("left",a-j+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(e){return!(v(e.originalEvent)&&!w.quitOnImgClick)||void(Math.abs(j)>50?j<0?O():S():p?h(L,"0px",w.animationSpeed/1e3):L.animate({left:a+"px"},w.animationSpeed/2))})},w.animationSpeed+100)},Q=function(){return!!L.length&&(L.remove(),void(L=e()))},W=function(t){return!K&&(K=!1,X=t,E(),e("body").append(f).addClass("imagelightbox-disable-select"),w.lockBody&&e("body").addClass("imagelightbox-scroll-lock"),f.trigger("start.ilb2"),void H(0))},$=function(){return f.trigger("quit.ilb2"),e("body").removeClass("imagelightbox-disable-select"),w.lockBody&&e("body").removeClass("imagelightbox-scroll-lock"),!!L.length&&void L.animate({opacity:0},w.animationSpeed,function(){Q(),K=!1,z=e([]),f.remove().find("*").remove()})},A=function(t){function i(){t.filter(function(){return e(this).data("imagelightbox")===R}).filter(function(){return Y(e(this))}).each(function(){z=z.add(e(this))})}t.on("click.ilb7",{set:R},function(t){t.preventDefault(),R=e(t.currentTarget).data("imagelightbox"),i(),z.length<1?$():W(e(this))})};return e(t).on("resize.ilb7",_),e(i).ready(function(){w.quitOnDocClick&&e(i).on(b?"touchend.ilb7":"click.ilb7",function(t){L.length&&!e(t.target).is(L)&&(t.preventDefault(),$())}),w.lockBody&&e(i).on("keydown.ilb7",function(e){return!L.length||([9,32,38,40].indexOf(e.which)>-1?(e.preventDefault(),!1):void 0)}),w.enableKeyboard&&e(i).on("keyup.ilb7",function(e){return!L.length||(e.preventDefault(),[27].indexOf(e.which)>-1&&w.quitOnEscKey&&$(),void([37].indexOf(e.which)>-1?O():[39].indexOf(e.which)>-1&&S()))}),i.addEventListener("keydown",function(e){[13].indexOf(e.which)>-1&&(x()||y())},!1)}),e(i).off("click",w.selector),A(e(this)),this.addToImageLightbox=function(e){A(e)},this.loadPreviousImage=function(){O()},this.loadNextImage=function(){S()},this.quitImageLightbox=function(){return $(),this},this.startImageLightbox=function(){e(this).trigger("click.ilb7")},this}}(jQuery,window,document);