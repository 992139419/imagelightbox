!function(t,i,e,n){"use strict";var o=t("<div/>").attr("id","imagelightbox-loading").append(t("<div/>")),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),l=a.add(r),c=t("<div/>",{id:"imagelightbox-caption",html:"&nbsp;"}),u=t("<a/>",{id:"imagelightbox-close"}),s=t("<div/>",{id:"imagelightbox-overlay"}),h=t("<a/>",{href:"#",class:"imagelightbox-navitem"}),d=t("<div/>",{id:"imagelightbox-nav"}),g=t("<div/>",{id:"imagelightbox-wrapper"}),f={home:{href:i.location.pathname,title:e.title},pushSpace:{name:"#!imagelightbox/",title:"ImageLightBox"},spacer:" | "},p=function(){var t=e.body||e.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},b=(!(!i.history||!history.pushState),p()!==!1),m=function(t,i,e){var n={},o=p();n[o+"transform"]="translateX("+i+")",n[o+"transition"]=o+"transform "+e+"s linear",t.css(n)},v="ontouchstart"in i,x=i.navigator.pointerEnabled||i.navigator.msPointerEnabled,y=function(t){if(v)return!0;if(!x||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(n){var a=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,history:!1,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},n),r=function(){a.arrows&&M(this),a.navigation&&C(),a.overlay&&S(),a.button&&T(),a.caption&&g.append(c)},p=function(){a.activity&&q(),a.caption&&I()},w=function(){a.activity&&O(),a.arrows&&l.css("display","block")},k=function(){if(X=D.index(L)-1,X<0){if(a.quitOnEnd===!0)return W(),!1;X=D.length-1}L=D.eq(X),g.trigger("previous.ilb2"),R(-1)},E=function(){if(X=D.index(L)+1,X>=D.length){if(a.quitOnEnd===!0)return W(),!1;X=0}L=D.eq(X),g.trigger("next.ilb2"),R(1)},q=function(){g.append(o)},O=function(){t("#imagelightbox-loading").remove()},S=function(){g.append(s)},T=function(){u.appendTo(g).on("click.ilb7",function(){return W(),!1})},I=function(){c.html("&nbsp;"),t(L).data("ilb2-caption")?c.html(t(L).data("ilb2-caption")):t(L).find("img").length>0&&c.html(t(L).find("img").attr("alt"))},C=function(){if(D.length){for(var i=0;i<D.length;i++)d.append(h.clone());var e=d.children("a");e.eq(D.index(L)).addClass("active"),g.on("previous.ilb2 next.ilb2",function(){e.removeClass("active").eq(D.index(L)).addClass("active")}),g.append(d),d.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(i){var e=t(this);if(D.eq(e.index()).attr("href")!==t("#imagelightbox").attr("src")){var n=D.eq(e.index());n.length&&(_=D.index(L),L=n,R(e.index()<_?-1:1))}e.addClass("active").siblings().removeClass("active")})}},M=function(){g.append(l),l.on("click.ilb7 touchend.ilb7",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?k():E(),!1})},P="",D=t([]),X=0,L=t(),B=t(),N=0,j=0,K=0,U=!1,_=0,z=function(t){function i(t){var i,n,o,a=e.createElement("a"),r={};for(a.href=t,i=a.search.replace(/^\?/,"").split("&"),o=0;o<i.length;o++)n=i[o].split("="),r[n[0]]=n[1];return{protocol:a.protocol,host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,searchObject:r,hash:a.hash}}var n=a.allowedTypes,o=/^(?!\|)[\w\|]+(?!\|)$/.test(n);if(!o)return!1;var r=t.attr("href"),l=i(r).pathname,c=new RegExp(n,"i"),u=c.test(l);return u},H=function(){if(!B.length)return!0;var e=c.outerHeight(),n=.8*t(i).width(),o=(i.innerHeight?i.innerHeight:t(i).height())-e,a=.9*o,r=new Image;r.src=B.attr("src"),r.onload=function(){if(N=r.width,j=r.height,N>n||j>a){var e=N/j>n/a?N/n:j/a;N/=e,j/=e}B.css({width:N+"px",height:j+"px",top:(o-j)/2+"px",left:(t(i).width()-N)/2+"px"})}},R=function(e){if(U)return!1;if(B.length){var n={opacity:0};b?m(B,100*e-K+"px",a.animationSpeed/1e3):n.left=parseInt(B.css("left"))+100*e+"px",B.animate(n,a.animationSpeed,function(){Y()}),K=0}U=!0,p(),setTimeout(function(){var n=L.attr("href"),o=D.index(L)+1,r={index:o},l=f.pushSpace.name+r.index;i.history.pushState(r,"",l),B=t('<img id="'+a.id+'" />').attr("src",n).on("load.ilb7",function(){g.trigger("loaded.ilb2");var i={opacity:1};if(B.appendTo(g),H(),B.css("opacity",0),b)m(B,-100*e+"px",0),setTimeout(function(){m(B,"0px",a.animationSpeed/1e3)},50);else{var n=parseInt(B.css("left"));i.left=n+"px",B.css("left",n-100*e+"px")}if(B.animate(i,a.animationSpeed,function(){U=!1,w()}),a.preloadNext){var o=D.eq(D.index(L)+1);o.length||(o=D.eq(0)),t("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){w()});var c=0,u=0,s=0;B.on(x?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),a.quitOnImgClick)return W(),!1;if(y(t.originalEvent))return!0;var i=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;N/2>i?k():E()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){return!(y(t.originalEvent)&&!a.quitOnImgClick)||(b&&(s=parseInt(B.css("left"))),void(c=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){return!(y(t.originalEvent)&&!a.quitOnImgClick)||(t.preventDefault(),u=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,K=c-u,void(b?m(B,-K+"px",0):B.css("left",s-K+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){return!(y(t.originalEvent)&&!a.quitOnImgClick)||void(Math.abs(K)>50?K<0?k():E():b?m(B,"0px",a.animationSpeed/1e3):B.animate({left:s+"px"},a.animationSpeed/2))})},a.animationSpeed+100)},Y=function(){return!!B.length&&(B.remove(),void(B=t()))},Q=function(i){return!U&&(U=!1,L=i,r(),t("body").append(g),a.lockBody&&t("body").addClass("imagelightbox-scroll-lock"),g.trigger("start.ilb2"),void R(0))},W=function(){return g.trigger("quit.ilb2"),a.lockBody&&t("body").removeClass("imagelightbox-scroll-lock"),!!B.length&&void B.animate({opacity:0},a.animationSpeed,function(){Y(),U=!1,D=t([]),g.remove().find("*").remove()})},$=function(i){function e(){i.filter(function(){return t(this).data("imagelightbox")===P}).filter(function(){return z(t(this))}).each(function(){D=D.add(t(this))})}i.on("click.ilb7",{set:P},function(i){i.preventDefault(),P=t(i.currentTarget).data("imagelightbox"),e(),D.length<1?W():Q(t(this))})};return t(i).on("resize.ilb7",H),t(e).ready(function(){a.quitOnDocClick&&t(e).on(v?"touchend.ilb7":"click.ilb7",function(i){B.length&&!t(i.target).is(B)&&(i.preventDefault(),W())}),a.lockBody&&t(e).on("keydown.ilb7",function(t){return!B.length||([9,32,38,40].indexOf(t.which)>-1?(t.preventDefault(),!1):void 0)}),a.enableKeyboard&&t(e).on("keyup.ilb7",function(t){return!B.length||(t.preventDefault(),[27].indexOf(t.which)>-1&&a.quitOnEscKey&&W(),void([37].indexOf(t.which)>-1?k():[39].indexOf(t.which)>-1&&E()))})}),t(e).off("click",this.selector),$(t(this)),this.addToImageLightbox=function(t){$(t)},this.loadPreviousImage=function(){k()},this.loadNextImage=function(){E()},this.quitImageLightbox=function(){return W(),this},this.startImageLightbox=function(){t(this).trigger("click.ilb7")},this}}(jQuery,window,document);