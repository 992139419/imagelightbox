!function(t,n,i,e){"use strict";var o=t("<div/>").attr("id","imagelightbox-loading").append(t("<div/>")),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),l=a.add(r),c=t("<div/>",{id:"imagelightbox-caption"}),u=t("<a/>",{id:"imagelightbox-close"}),d=t("<div/>",{id:"imagelightbox-overlay"}),f=t("<div/>",{id:"imagelightbox-nav"}),g=t("<div/>",{id:"imagelightbox-wrapper"}),s=function(){var t=i.body||i.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},p=s()!==!1,h=function(t,n,i){var e={},o=s();e[o+"transform"]="translateX("+n+")",e[o+"transition"]=o+"transform "+i+"s linear",t.css(e)},v="ontouchstart"in n,b=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,m=function(t){if(v)return!0;if(!b||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(e){var a=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:function(){a.arrows&&q(this),a.navigation&&T(this,a.selector),a.overlay&&y(),a.button&&E(),a.lockBody&&x(!0)},onEnd:function(){g.remove().find("*").remove(),a.lockBody&&x(!1)},onLoadStart:function(){a.activity&&r(),a.caption&&S()},onLoadEnd:function(){a.activity&&s(),a.arrows&&l.css("display","block"),a.navigation&&w(a.selector),a.caption&&k()},previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){var t=O.index(C)-1;if(t<0){if(a.quitOnEnd===!0)return z(),!1;t=O.length-1}C=O.eq(t)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){var t=O.index(C)+1;if(t>=O.length){if(a.quitOnEnd===!0)return z(),!1;t=0}C=O.eq(t)}},e),r=function(){g.append(o)},s=function(){t("#imagelightbox-loading").remove()},x=function(n){n?t("body").css("overflow","hidden"):t("body").css("overflow","scroll")},y=function(){g.append(d)},E=function(){u.appendTo(g).on("click.ilb7",function(){return z(),!1})},k=function(){var n="";t(C).data("ilb2-caption")?n=t(C).data("ilb2-caption"):t(C).find("img").length&&(n=t(C).find("img").attr("alt")),n&&n.length>0&&g.append(c.text(n))},S=function(){c.html("&nbsp;")},T=function(n,i){var e=t(i);if(e.length){for(var o=0;o<e.length;o++)f.append(t("<a/>",{href:"#"}));g.append(f),f.on("click.ilb7 touchend.ilb7",function(){return!1});var a=f.find("a");a.on("click.ilb7 touchend.ilb7",function(){var n=t(this);if(e.eq(n.index()).attr("href")!==t("#imagelightbox").attr("src")){var i=O.eq(n.index());if(i.length){var o=O.index(C);C=i,N(n.index()<o?"left":"right")}}return a.removeClass("active"),a.eq(n.index()).addClass("active"),!1}).on("touchend.ilb7",function(){return!1})}},w=function(n){var i=f.find("a");i.removeClass("active"),i.eq(t(n).filter('[href="'+t("#imagelightbox").attr("src")+'"]').index(n)).addClass("active")},q=function(){g.append(l),l.on("click.ilb7 touchend.ilb7",function(n){return n.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?K():U(),!1})},O=t([]),C=t(),I=t(),D=0,L=0,M=0,P=!1,X=function(){if(!I.length)return!0;var i=.8*t(n).width(),e=n.innerHeight?n.innerHeight:t(n).height(),o=.9*e,a=new Image;a.src=I.attr("src"),a.onload=function(){if(D=a.width,L=a.height,D>i||L>o){var r=D/L>i/o?D/i:L/o;D/=r,L/=r}I.css({width:D+"px",height:L+"px",top:(e-L)/2+"px",left:(t(n).width()-D)/2+"px"})}},N=function(n){if(P)return!1;if(n="undefined"!=typeof n&&("left"===n?1:-1),I.length){var i={opacity:0};p?h(I,100*n-M+"px",a.animationSpeed/1e3):i.left=parseInt(I.css("left"))+100*n+"px",I.animate(i,a.animationSpeed,function(){_()}),M=0}P=!0,a.onLoadStart!==!1&&a.onLoadStart(),setTimeout(function(){var i=C.attr("href");I=t('<img id="'+a.id+'" />').attr("src",i).on("load.ilb7",function(){var i={opacity:1};if(I.appendTo(g),X(),I.css("opacity",0),p)h(I,-100*n+"px",0),setTimeout(function(){h(I,"0px",a.animationSpeed/1e3)},50);else{var e=parseInt(I.css("left"));i.left=e+"px",I.css("left",e-100*n+"px")}if(I.animate(i,a.animationSpeed,function(){P=!1,a.onLoadEnd!==!1&&a.onLoadEnd()}),a.preloadNext){var o=O.eq(O.index(C)+1);o.length||(o=O.eq(0)),t("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){a.onLoadEnd!==!1&&a.onLoadEnd()});var e=0,o=0,r=0;I.on(b?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),a.quitOnImgClick)return z(),!1;if(m(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;D/2>n?K():U()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){return!(m(t.originalEvent)&&!a.quitOnImgClick)||(p&&(r=parseInt(I.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){return!(m(t.originalEvent)&&!a.quitOnImgClick)||(t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,M=e-o,void(p?h(I,-M+"px",0):I.css("left",r-M+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){return!(m(t.originalEvent)&&!a.quitOnImgClick)||void(Math.abs(M)>50?M<0?K():U():p?h(I,"0px",a.animationSpeed/1e3):I.animate({left:r+"px"},a.animationSpeed/2))})},a.animationSpeed+100)},K=function(){a.previousTarget()!==!1&&N("left")},U=function(){a.nextTarget()!==!1&&N("right")},_=function(){return!!I.length&&(I.remove(),void(I=t()))},j=function(n){return!P&&(P=!1,a.onStart!==!1&&a.onStart(),t("body").append(g),C=n,void N())},z=function(){return!!I.length&&void I.animate({opacity:0},a.animationSpeed,function(){_(),P=!1,a.onEnd!==!1&&a.onEnd()})},B=function(n){n.each(function(){O=O.add(t(this))}),n.on("click.ilb7",function(n){n.preventDefault(),j(t(this))})};return this.startImageLightbox=function(){this.length>0&&j(t(this[0]))},t(n).on("resize.ilb7",X),t(i).ready(function(){a.quitOnDocClick&&t(i).on(v?"touchend.ilb7":"click.ilb7",function(n){I.length&&!t(n.target).is(I)&&(n.preventDefault(),z())}),a.enableKeyboard&&t(i).on("keyup.ilb7",function(t){return!I.length||(t.preventDefault(),27===t.keyCode&&a.quitOnEscKey===!0&&z(),void(37===t.keyCode?K():39===t.keyCode&&U()))})}),t(i).off("click",this.selector),B(t(this)),this.loadPreviousImage=function(){K()},this.loadNextImage=function(){U()},this.quitImageLightbox=function(){return z(),this},this.addToImageLightbox=function(t){B(t)},this}}(jQuery,window,document);