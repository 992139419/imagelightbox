!function(i,t,n,e){"use strict";var o=i("<div/>").attr("id","imagelightbox-loading").append(i("<div/>")),a=i("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=i("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),l=a.add(r),c=i("<div/>",{id:"imagelightbox-caption"}),u=i("<a/>",{id:"imagelightbox-close"}),d=i("<div/>",{id:"imagelightbox-overlay"}),f=i("<a/>",{href:"#",class:"imagelightbox-navitem"}),g=i("<div/>",{id:"imagelightbox-nav"}),s=i("<div/>",{id:"imagelightbox-wrapper"}),p=function(){var i=n.body||n.documentElement;return i=i.style,""===i.WebkitTransition?"-webkit-":""===i.MozTransition?"-moz-":""===i.OTransition?"-o-":""===i.transition&&""},h=p()!==!1,v=function(i,t,n){var e={},o=p();e[o+"transform"]="translateX("+t+")",e[o+"transition"]=o+"transform "+n+"s linear",i.css(e)},b="ontouchstart"in t,m=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,x=function(i){if(b)return!0;if(!m||"undefined"==typeof i||"undefined"==typeof i.pointerType)return!1;if("undefined"!=typeof i.MSPOINTER_TYPE_MOUSE){if(i.MSPOINTER_TYPE_MOUSE!==i.pointerType)return!0}else if("mouse"!==i.pointerType)return!0;return!1};i.fn.imageLightbox=function(e){var a=i.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},e),r=function(){a.onStart&&a.onStart(),a.arrows&&L(this),a.navigation&&P(this,a.selector),a.overlay&&T(),a.button&&I(),a.lockBody&&O(!0)},p=function(){N=i([]),s.remove().find("*").remove(),a.lockBody&&O(!1),a.onEnd&&a.onEnd()},y=function(){a.onLoadStart&&a.onLoadStart(),a.activity&&S(),a.caption&&M()},w=function(){a.activity&&q(),a.arrows&&l.css("display","block"),a.navigation&&D(a.selector),a.caption&&C(),a.onLoadEnd&&a.onLoadStart()},E=function(){s.trigger("previous.ilb2");var i=N.index(B)-1;if(i<0){if(a.quitOnEnd===!0)return F(),!1;i=N.length-1}B=N.eq(i)},k=function(){s.trigger("next.ilb2");var i=N.index(B)+1;if(i>=N.length){if(a.quitOnEnd===!0)return F(),!1;i=0}B=N.eq(i)},S=function(){s.append(o)},q=function(){i("#imagelightbox-loading").remove()},O=function(t){t?i("body").css("overflow","hidden"):i("body").css("overflow","scroll")},T=function(){s.append(d)},I=function(){u.appendTo(s).on("click.ilb7",function(){return F(),!1})},C=function(){var t="";i(B).data("ilb2-caption")?t=i(B).data("ilb2-caption"):i(B).find("img").length&&(t=i(B).find("img").attr("alt")),t&&t.length>0&&s.append(c.text(t))},M=function(){c.html("&nbsp;")},P=function(){var t=N;if(t.length){for(var n=0;n<t.length;n++)g.append(f.clone());s.append(g),g.on("click.ilb7 touchend.ilb7",function(){return!1});var e=g.find("a");e.on("click.ilb7 touchend.ilb7",function(){var n=i(this);if(t.eq(n.index()).attr("href")!==i("#imagelightbox").attr("src")){var o=N.eq(n.index());if(o.length){var a=N.index(B);B=o,R(n.index()<a?"left":"right")}}return e.removeClass("active"),e.eq(n.index()).addClass("active"),!1}).on("touchend.ilb7",function(){return!1})}},D=function(){var i=g.find("a");i.removeClass("active"),i.eq(N.index(B)).addClass("active")},L=function(){s.append(l),l.on("click.ilb7 touchend.ilb7",function(t){return t.preventDefault(),i(this).hasClass("imagelightbox-arrow-left")?Y():Q(),!1})},X="",N=i([]),B=i(),K=i(),U=0,_=0,j=0,z=!1,H=function(){if(!K.length)return!0;var n=.8*i(t).width(),e=t.innerHeight?t.innerHeight:i(t).height(),o=.9*e,a=new Image;a.src=K.attr("src"),a.onload=function(){if(U=a.width,_=a.height,U>n||_>o){var r=U/_>n/o?U/n:_/o;U/=r,_/=r}K.css({width:U+"px",height:_+"px",top:(e-_)/2+"px",left:(i(t).width()-U)/2+"px"})}},R=function(t){if(z)return!1;if(t="undefined"!=typeof t&&("left"===t?1:-1),K.length){var n={opacity:0};h?v(K,100*t-j+"px",a.animationSpeed/1e3):n.left=parseInt(K.css("left"))+100*t+"px",K.animate(n,a.animationSpeed,function(){W()}),j=0}z=!0,y(),setTimeout(function(){var n=B.attr("href");K=i('<img id="'+a.id+'" />').attr("src",n).on("load.ilb7",function(){var n={opacity:1};if(K.appendTo(s),H(),K.css("opacity",0),h)v(K,-100*t+"px",0),setTimeout(function(){v(K,"0px",a.animationSpeed/1e3)},50);else{var e=parseInt(K.css("left"));n.left=e+"px",K.css("left",e-100*t+"px")}if(K.animate(n,a.animationSpeed,function(){z=!1,w()}),a.preloadNext){var o=N.eq(N.index(B)+1);o.length||(o=N.eq(0)),i("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){w()});var e=0,o=0,r=0;K.on(m?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(i){if(i.preventDefault(),a.quitOnImgClick)return F(),!1;if(x(i.originalEvent))return!0;var t=(i.pageX||i.originalEvent.pageX)-i.target.offsetLeft;U/2>t?Y():Q()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(i){return!(x(i.originalEvent)&&!a.quitOnImgClick)||(h&&(r=parseInt(K.css("left"))),void(e=i.originalEvent.pageX||i.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(i){return!(x(i.originalEvent)&&!a.quitOnImgClick)||(i.preventDefault(),o=i.originalEvent.pageX||i.originalEvent.touches[0].pageX,j=e-o,void(h?v(K,-j+"px",0):K.css("left",r-j+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(i){return!(x(i.originalEvent)&&!a.quitOnImgClick)||void(Math.abs(j)>50?j<0?Y():Q():h?v(K,"0px",a.animationSpeed/1e3):K.animate({left:r+"px"},a.animationSpeed/2))})},a.animationSpeed+100)},Y=function(){E()!==!1&&R("left")},Q=function(){k()!==!1&&R("right")},W=function(){return!!K.length&&(K.remove(),void(K=i()))},A=function(t){return!z&&(z=!1,r(),i("body").append(s),s.trigger("start.ilb2"),B=t,void R())},F=function(){return s.trigger("quit.ilb2"),!!K.length&&void K.animate({opacity:0},a.animationSpeed,function(){W(),z=!1,p()})},G=function(t){function n(){t.filter(function(){return i(this).data("imagelightbox")===X}).each(function(){N=N.add(i(this))})}t.on("click.ilb7",{set:X},function(t){t.preventDefault(),X=i(t.currentTarget).data("imagelightbox"),n(),A(i(this))})};return i(t).on("resize.ilb7",H),i(n).ready(function(){a.quitOnDocClick&&i(n).on(b?"touchend.ilb7":"click.ilb7",function(t){K.length&&!i(t.target).is(K)&&(t.preventDefault(),F())}),a.lockBody&&i(n).on("keydown.ilb7",function(i){return!K.length||([9,32,38,40].indexOf(i.which)>-1?(i.preventDefault(),!1):void 0)}),a.enableKeyboard&&i(n).on("keyup.ilb7",function(i){return!K.length||(i.preventDefault(),[27].indexOf(i.which)>-1&&a.quitOnEscKey&&F(),void([37].indexOf(i.which)>-1?Y():[39].indexOf(i.which)>-1&&Q()))})}),i(n).off("click",this.selector),G(i(this)),this.addToImageLightbox=function(i){G(i)},this.loadPreviousImage=function(){Y()},this.loadNextImage=function(){Q()},this.quitImageLightbox=function(){return F(),this},this.startImageLightbox=function(){this.length>0&&A(i(this[0]))},this}}(jQuery,window,document);